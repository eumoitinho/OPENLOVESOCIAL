# üéâ Componentes de Eventos - An√°lise e Depend√™ncias

## üö® Status Atual: CR√çTICO

### **Situa√ß√£o:**
- ‚ùå **DIRET√ìRIO COMPLETAMENTE VAZIO**
- ‚úÖ **APIs IMPLEMENTADAS** no backend
- ‚ùå **NENHUM COMPONENTE** de UI para eventos

## üîó APIs Dispon√≠veis vs Componentes

### **APIs Implementadas:**
- ‚úÖ `/api/events` - CRUD de eventos
- ‚úÖ `/api/events/nearby` - Eventos pr√≥ximos por geolocaliza√ß√£o
- ‚úÖ **Backend completo** com todas as funcionalidades

### **Componentes Existentes:**
- ‚ùå **NENHUM** - Diret√≥rio vazio

### **Depend√™ncias de Banco Dispon√≠veis:**
```sql
-- Tabelas j√° implementadas no backend:
events (
  id, creator_id, title, description, cover_image_url,
  type, category, start_date, end_date, timezone,
  is_online, online_link, location_name, location_address,
  latitude, longitude, max_participants, min_age, max_age,
  is_paid, price, currency, tags, hashtags,
  stats, status, created_at
)

event_participants (
  id, event_id, user_id, status, role,
  checked_in, payment_status, created_at
)

event_invitations (
  id, event_id, inviter_id, invitee_id,
  status, invitation_code, expires_at
)

user_monthly_events (
  id, user_id, month_year, events_created
)
```

## ‚ùå Componentes Ausentes - TODOS CR√çTICOS

### **1. EventsList.tsx** - **FUNDAMENTAL**
```typescript
interface EventsListProps {
  filters?: {
    category?: string;
    location?: { lat: number; lng: number; radius: number };
    dateRange?: { start: Date; end: Date };
    type?: 'public' | 'private' | 'paid';
  };
  userLocation?: { lat: number; lng: number };
  onEventClick: (eventId: string) => void;
}

// Funcionalidades necess√°rias:
// - Lista de eventos com filtros
// - Mapa de eventos pr√≥ximos  
// - Categoriza√ß√£o por tipo
// - Pagina√ß√£o infinita
// - Estados de participa√ß√£o
```

### **2. CreateEvent.tsx** - **CR√çTICO**
```typescript
interface CreateEventProps {
  onEventCreated: (event: Event) => void;
  onUpgradeNeeded: (reason: string) => void;
}

// Funcionalidades necess√°rias:
// - Formul√°rio completo de cria√ß√£o
// - Valida√ß√µes por plano de usu√°rio:
//   - Gratuito: N√£o pode criar
//   - Ouro: 3 eventos/m√™s
//   - Diamante: 10 eventos/m√™s
// - Upload de imagem de capa
// - Seletor de localiza√ß√£o/mapa
// - Configura√ß√µes de privacidade
// - Sistema de pre√ßos (apenas Diamante)
```

### **3. EventDetails.tsx** - **CR√çTICO**
```typescript
interface EventDetailsProps {
  eventId: string;
  onJoin: (eventId: string) => void;
  onLeave: (eventId: string) => void;
  onShare: (event: Event) => void;
}

// Funcionalidades necess√°rias:
// - Detalhes completos do evento
// - Bot√µes de participa√ß√£o
// - Lista de participantes
// - Mapa de localiza√ß√£o
// - Chat do evento (para participantes)
// - Sistema de check-in com QR code
// - Pagamento para eventos pagos
```

### **4. EventCard.tsx** - **IMPORTANTE**
```typescript
interface EventCardProps {
  event: Event;
  userParticipationStatus?: 'going' | 'interested' | 'not_going';
  showDistance?: boolean;
  onQuickAction: (action: 'join' | 'interested' | 'share') => void;
}

// Funcionalidades necess√°rias:
// - Card visual atrativo
// - Informa√ß√µes resumidas
// - Status de participa√ß√£o
// - A√ß√µes r√°pidas
// - Indicadores visuais (pago, online, etc)
```

### **5. EventsMap.tsx** - **IMPORTANTE**
```typescript
interface EventsMapProps {
  events: Event[];
  userLocation?: { lat: number; lng: number };
  onEventMarkerClick: (eventId: string) => void;
  filters?: EventFilters;
}

// Funcionalidades necess√°rias:
// - Mapa interativo com marcadores
// - Clustering de eventos pr√≥ximos
// - Filtros por dist√¢ncia
// - Preview popup dos eventos
// - Navega√ß√£o para local do evento
```

### **6. EventParticipants.tsx** - **IMPORTANTE**  
```typescript
interface EventParticipantsProps {
  eventId: string;
  isCreator: boolean;
  onInviteMore: () => void;
  onManageParticipant: (userId: string, action: string) => void;
}

// Funcionalidades necess√°rias:
// - Lista de participantes confirmados
// - Lista de interessados
// - Sistema de convites
// - Gerenciamento (apenas criador)
// - Check-in dos participantes
```

### **7. EventInvitation.tsx** - **IMPORTANTE**
```typescript
interface EventInvitationProps {
  eventId: string;
  onInviteSent: (inviteeIds: string[]) => void;
  maxInvitations?: number; // Baseado no plano
}

// Funcionalidades necess√°rias:
// - Busca e sele√ß√£o de amigos
// - Convite por link
// - Convite por email
// - Limita√ß√µes por plano
// - Preview da mensagem de convite
```

### **8. EventCheckIn.tsx** - **CR√çTICO**
```typescript
interface EventCheckInProps {
  eventId: string;
  isCreator: boolean;
  userLocation?: { lat: number; lng: number };
  onCheckInSuccess: () => void;
}

// Funcionalidades necess√°rias:
// - QR code scanner (para participantes)
// - QR code generator (para criadores)
// - Verifica√ß√£o de localiza√ß√£o
// - Lista de check-ins (criadores)
// - Valida√ß√£o de proximidade ao evento
```

### **9. EventsCalendar.tsx** - **IMPORTANTE**
```typescript
interface EventsCalendarProps {
  events: Event[];
  selectedDate?: Date;
  onDateSelect: (date: Date) => void;
  onEventSelect: (eventId: string) => void;
}

// Funcionalidades necess√°rias:
// - Calend√°rio mensal/semanal
// - Eventos do usu√°rio
// - Eventos pr√≥ximos
// - Sincroniza√ß√£o com calend√°rio nativo
// - Lembretes autom√°ticos
```

### **10. EventFilters.tsx** - **IMPORTANTE**
```typescript
interface EventFiltersProps {
  onFiltersChange: (filters: EventFilters) => void;
  userLocation?: { lat: number; lng: number };
  availableCategories: string[];
}

// Funcionalidades necess√°rias:
// - Filtro por categoria
// - Filtro por dist√¢ncia
// - Filtro por data
// - Filtro por pre√ßo (gratuito/pago)
// - Filtro por tipo (online/presencial)
// - Salvamento de filtros preferidos
```

## üîß Limita√ß√µes por Plano a Implementar

### **Valida√ß√µes Necess√°rias:**
```typescript
const EVENT_LIMITATIONS = {
  free: {
    canCreate: false,
    canJoin: true, // Ilimitado
    canJoinPaid: false,
    maxInvitations: 0,
    canAccessAnalytics: false
  },
  gold: {
    canCreate: true,
    maxEventsPerMonth: 3,
    canJoin: true,
    canJoinPaid: true,
    maxInvitations: 50,
    canAccessAnalytics: false,
    canCreatePaid: false
  },
  diamond: {
    canCreate: true,
    maxEventsPerMonth: 10,
    canJoin: true,
    canJoinPaid: true,
    maxInvitations: 200,
    canAccessAnalytics: true,
    canCreatePaid: true,
    canCreateRecurring: true
  }
};

// Valida√ß√£o na cria√ß√£o de eventos
const validateEventCreation = async (user: User) => {
  if (user.plan_type === 'free') {
    throw new Error('Upgrade para criar eventos');
  }
  
  const monthlyCount = await getMonthlyEventCount(user.id);
  const limit = EVENT_LIMITATIONS[user.plan_type].maxEventsPerMonth;
  
  if (monthlyCount >= limit) {
    throw new Error(`Limite mensal atingido (${limit} eventos)`);
  }
};
```

## üöÄ Arquitetura de Implementa√ß√£o

### **Estrutura de Diret√≥rios Recomendada:**
```
/app/components/events/
‚îú‚îÄ‚îÄ EventsList.tsx           # Lista principal
‚îú‚îÄ‚îÄ CreateEvent.tsx          # Cria√ß√£o (form completo)
‚îú‚îÄ‚îÄ EventDetails.tsx         # Detalhes e participa√ß√£o
‚îú‚îÄ‚îÄ EventCard.tsx           # Card individual
‚îú‚îÄ‚îÄ EventsMap.tsx           # Mapa interativo
‚îú‚îÄ‚îÄ EventParticipants.tsx   # Gest√£o de participantes
‚îú‚îÄ‚îÄ EventInvitation.tsx     # Sistema de convites
‚îú‚îÄ‚îÄ EventCheckIn.tsx        # Check-in com QR
‚îú‚îÄ‚îÄ EventsCalendar.tsx      # Calend√°rio
‚îú‚îÄ‚îÄ EventFilters.tsx        # Filtros avan√ßados
‚îú‚îÄ‚îÄ components/             # Subcomponentes
‚îÇ   ‚îú‚îÄ‚îÄ EventStatusBadge.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ParticipantAvatar.tsx
‚îÇ   ‚îú‚îÄ‚îÄ EventLocationMap.tsx
‚îÇ   ‚îú‚îÄ‚îÄ EventPriceDisplay.tsx
‚îÇ   ‚îî‚îÄ‚îÄ EventShareButton.tsx
‚îî‚îÄ‚îÄ hooks/                  # Hooks espec√≠ficos
    ‚îú‚îÄ‚îÄ useEvents.ts
    ‚îú‚îÄ‚îÄ useEventParticipation.ts
    ‚îú‚îÄ‚îÄ useNearbyEvents.ts
    ‚îî‚îÄ‚îÄ useEventValidation.ts
```

### **Hooks Necess√°rios:**
```typescript
// Hook principal para eventos
export const useEvents = () => {
  const { data: events, mutate } = useSWR('/api/events', fetcher);
  
  const createEvent = async (eventData: CreateEventData) => {
    const response = await fetch('/api/events', {
      method: 'POST',
      body: JSON.stringify(eventData)
    });
    await mutate();
    return response.json();
  };

  return { events, createEvent, mutate };
};

// Hook para eventos pr√≥ximos
export const useNearbyEvents = (location: Location, radius: number) => {
  const { data } = useSWR(
    location ? `/api/events/nearby?lat=${location.lat}&lng=${location.lng}&radius=${radius}` : null,
    fetcher
  );
  
  return { nearbyEvents: data };
};

// Hook para participa√ß√£o em eventos
export const useEventParticipation = (eventId: string) => {
  const joinEvent = async () => {
    await fetch(`/api/events/${eventId}/join`, { method: 'POST' });
  };
  
  const leaveEvent = async () => {
    await fetch(`/api/events/${eventId}/leave`, { method: 'POST' });
  };
  
  return { joinEvent, leaveEvent };
};
```

## üìä Integra√ß√£o com Sistema Existente

### **Integra√ß√µes Necess√°rias:**
```typescript
// 1. Timeline Integration
// Eventos devem aparecer na timeline como posts especiais
const EventTimelineCard = ({ event }: { event: Event }) => {
  return (
    <PostCard
      type="event"
      content={`üìÖ ${event.title}`}
      media={[event.cover_image_url]}
      actions={['join', 'interested', 'share']}
    />
  );
};

// 2. Chat Integration  
// Eventos com chat para participantes
const EventChat = ({ eventId }: { eventId: string }) => {
  return (
    <ChatInterface
      conversationId={`event_${eventId}`}
      type="event"
      restrictions={{ onlyParticipants: true }}
    />
  );
};

// 3. Notifications Integration
// Notifica√ß√µes para convites, lembretes, etc
const sendEventNotification = async (type: string, data: any) => {
  await fetch('/api/notifications', {
    method: 'POST',
    body: JSON.stringify({
      type: `event_${type}`,
      ...data
    })
  });
};
```

## üö® Impacto da Aus√™ncia

### **Problemas Atuais:**
1. **Funcionalidade documentada** mas **inacess√≠vel** aos usu√°rios
2. **APIs implementadas** mas **sem interface**
3. **Perda de engajamento** por n√£o ter sistema social de eventos
4. **Diferencial competitivo perdido** (eventos s√£o feature principal)

### **Receita Impactada:**
- Usu√°rios Ouro podem criar at√© 3 eventos/m√™s (R$ 25)
- Usu√°rios Diamante podem criar at√© 10 eventos/m√™s (R$ 45,90)
- **SEM INTERFACE = SEM RECEITA** desta feature

## ‚úÖ Plano de Implementa√ß√£o Urgente

### **Sprint 1 - MVP (1 semana):**
1. **EventsList.tsx** - Lista b√°sica
2. **CreateEvent.tsx** - Formul√°rio simples
3. **EventCard.tsx** - Card b√°sico
4. **EventDetails.tsx** - P√°gina de detalhes

### **Sprint 2 - Core Features (1 semana):**
1. **EventsMap.tsx** - Mapa com marcadores
2. **EventParticipants.tsx** - Sistema de participa√ß√£o
3. **EventFilters.tsx** - Filtros b√°sicos

### **Sprint 3 - Advanced (1 semana):**
1. **EventInvitation.tsx** - Sistema de convites
2. **EventCheckIn.tsx** - QR code check-in
3. **EventsCalendar.tsx** - Calend√°rio

## üéØ Conclus√£o

A aus√™ncia completa de componentes de eventos √© um **PROBLEMA CR√çTICO** que impacta diretamente:

- ‚ùå **Experi√™ncia do usu√°rio** comprometida
- ‚ùå **Receita potencial** perdida
- ‚ùå **Diferencial competitivo** n√£o explorado
- ‚ùå **APIs desenvolvidas** mas inutilizadas

**RECOMENDA√á√ÉO:** Implementa√ß√£o **URGENTE** dos componentes b√°sicos de eventos para ativar esta funcionalidade crucial.